<!DOCTYPE HTML>
<html>
    <head>
        <title>Digital Circuit Builder</title>
        <link href="styles/main.css" rel="stylesheet"/>
        <script src="js/dest/vue.js" type="text/javascript"></script>
        <script type="x-template" id="tab-template">
            <div v-bind:id="'tab-' + tabId" class="tab" v-bind:class="{active: isActive}" v-on:click="setActive">
                <span>{{name}}</span>
                <button v-bind:id="'delete-tab-' + tabId" v-on:click="deleteTab">
                    <i class="el el-remove"></i>
                </button>
            </div>
        </script>
        <script type="x-template" id="add-tab-template">
            <button id="add-tab" class="tab" v-on:click="addTab">
                <i class="el el-plus">
                </i>
            </button>
        </script>
        <script type="x-template" id="tabs-bar-template">
            <div id="tabs-bar">
                <div id="tabs">
                    <tab v-for="tab in tabs" v-bind:tab-id="tab.id" v-bind:name="tab.name" v-bind:curr-active="activeTab"></tab>
                </div><add-tab></add-tab>
            </div>
        </script>
        <script type="x-template" id="truth-button-template">
            <button class="truth-button" v-bind:id="name + '-button'" v-on:click="onClick">
                <i v-bind:class="icon"></i>
            </button>
        </script>
        <script type="x-template" id="modal-template">
            <div class="modal" v-bind:id="name + '-modal'" v-if="isVisible">
                <div class="modal-inner">
                    <h1 class="modal-title" v-html="title"></h1>
                    <input v-if="hasFileInput" class="modal-textarea" name="file" type="file" @change="onFileChange"></input>
                    <textarea v-if="hasTextArea" class="modal-textarea" v-model="textAreaContent"></textarea>
                    <button class="modal-button" v-on:click="exitAction">Exit</button>
                    <button class="modal-button" v-on:click="importAction" v-if="name == 'camera' || name == 'import'">Import</button>
                </div>
            </div>
        </script>
        <script src="js/dest/jquery.min.js" type="text/javascript"></script>
        <script src="js/dest/fabric.min.js" type="text/javascript"></script>
        <script src="js/dest/concat.js" type="text/javascript"></script>
        <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
        <link href="https://fonts.googleapis.com/css?family=Overpass+Mono" rel="stylesheet"/>
        <link rel="stylesheet" href="http://code.rifix.net/elusiveicons/2.0.0/css/elusive-icons.min.css"/>
    </head>
    <body>
        <div id="main">
            <tabs-bar v-bind:tabs="tabs" v-bind:active-tab="activeTab"></tabs-bar>

            <canvas id="editor"></canvas>

            <div id="truth-table">
                <truth-button v-bind:name="'export'"></truth-button>
                <truth-button v-bind:name="'import'"></truth-button>
                <truth-button v-bind:name="'simplify'"></truth-button>
                <truth-button v-bind:name="'camera'"></truth-button><br/>
                Truth Table
                <truth-table-content v-bind:objects="objectsList[activeTab]"></truth-table-content>
            </div>
            
            <div id="info-wrapper">
                <div id="current-hovered-element">Hovered: No element.</div>
                <cost-info v-bind:objects="objectsList[activeTab]"></cost-info>
            </div>

            <modal v-bind:name="'export'" v-bind:title="'Export Content'" v-bind:objects-list="objectsList"></modal>
            <modal v-bind:name="'import'" v-bind:title="'Import Content'"></modal>
            <modal v-bind:name="'camera'" v-bind:title="'Import Scanned Image'"></modal>
        </div>
    </body>
</html>